<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Mobile Phone Dashboard</title>
	</head>
	
	<body>
		<input type="button" value="Enable Orientation Access" onclick=enableSensors()></input>
		<h2 id="speed">0</h2>
		<h2 id="lat">0</h2>
		<h2 id="lon">0</h2>
		<h2 id="accuracy">0</h2>
		<h2 id="alpha">0</h2>
		<h2 id="beta">0</h2>
		<h2 id="gamma">0</h2>
		<h2 id="accelX">0</h2>
		<h2 id="accelY">0</h2>
		<h2 id="accelZ">0</h2>
		
		<script>
			function enableSensors () {
				enableLocation();
				enableOrientation();
				enableMotion();
			}
			
			
			function enableLocation () {
				if (navigator.geolocation) {
					navigator.geolocation.watchPosition(success);
				}

				function success(position) {
					document.getElementById("speed").innerHTML = "Speed: " + position.coords.speed;
					document.getElementById("lat").innerHTML = "Lat: " + position.coords.latitude;
					document.getElementById("lon").innerHTML = "Lon: " + position.coords.longitude;
					document.getElementById("accuracy").innerHTML = "Accuracy: " + position.coords.accuracy;
				}	
			}
			
			
			function enableOrientation () {
				DeviceOrientationEvent.requestPermission().then(response => {
					if (response == "granted") {
						window.addEventListener("deviceorientation", (event) => {
							document.getElementById("alpha").innerHTML = "Alpha: " + event.alpha.toFixed(0);
							document.getElementById("beta").innerHTML = "Beta: " + event.beta.toFixed(0);
							document.getElementById("gamma").innerHTML = "Gamma: " + event.gamma.toFixed(0);
						})
					}
				})
			}
			
			function enableMotion () {
				DeviceMotionEvent.requestPermission().then(response => {
					if (response == "granted") {
						window.addEventListener("devicemotion", (event) => {
							document.getElementById("accelX").innerHTML = "AccelX: " + event.acceleration.x.toFixed(1);
							document.getElementById("accelY").innerHTML = "AccelY: " + event.acceleration.y.toFixed(1);
							document.getElementById("accelZ").innerHTML = "AccelZ: " + event.acceleration.z.toFixed(1);
						})
					}
				})
			}
			
			/*
			if(window.DeviceOrientationEvent) {
				document.getElementById("connection").innerHTML = "TRUE";
				window.addEventListener("deviceorientation", handleOrientation, true);
			} else {
				document.getElementById("connection").innerHTML = "FALSE";
			}
			
			function handleOrientation(event) {
			  	var absolute = event.absolute;
			  	var alpha    = event.alpha;
			  	var beta     = event.beta;
			  	var gamma    = event.gamma;
				console.log("Absolute:" + absolute);
				console.log("Alpha:" + alpha);
				console.log("Beta:" + beta);
				console.log("Gamma:" + gamma);
				document.getElementById("absolute").innerHTML = absolute;
				document.getElementById("alpha").innerHTML = alpha;
				document.getElementById("beta").innerHTML = beta;
				document.getElementById("gamma").innerHTML = gamma;
			}
			*/
		</script>
	</body>

</html>
